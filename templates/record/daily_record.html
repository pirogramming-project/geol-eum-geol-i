{% load static %}
<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <link rel="stylesheet" href="{% static 'css/root.css' %}">
    <link rel="stylesheet" href="{% static 'css/reset.css' %}">
    <link rel="stylesheet" href="{% static 'css/record/daily_record.css' %}">
    <title>걸음걸이</title>
    <script src="https://maps.googleapis.com/maps/api/js?key=AIzaSyC5qxdgHtQEaaRKI9zP9_tTjZRXQOXPFiU" async defer></script>
</head>
<body>
    <div class="daily__layout">
        <div class="daily__container">
            <div class="daily__info">
                <button type="submit" src="#" class="daily__back_to_main">
                    <svg xmlns="http://www.w3.org/2000/svg" width="47" height="57" viewBox="0 0 47 57" fill="none">
                        <path d="M36.4381 26.8837V40.0532C36.4381 41.8312 34.8251 43.2793 32.8327 43.2793H26.9761V31.3566C26.9761 30.2037 26.0426 29.2702 24.8897 29.2702H21.5498C20.3937 29.2702 19.4635 30.2037 19.4635 31.3566V43.2793H13.6068C11.6227 43.2793 10.0014 41.8312 10.0014 40.0532V26.8837C10.1795 26.7947 23.2174 15.2642 23.2174 15.2642C23.2174 15.2642 36.2552 26.7913 36.4334 26.8837H36.4381ZM40.474 21.4953L24.5612 7.88709C23.7976 7.22408 22.6481 7.22408 21.8927 7.88709L5.96518 21.4953C5.17187 22.1798 5.04816 23.3524 5.6782 24.1672C6.01136 24.6141 6.53582 24.9061 7.10156 24.9605C7.16423 24.9687 7.2368 24.9737 7.29947 24.9737C7.78933 24.9737 8.26598 24.8005 8.63378 24.4838L23.222 12.0067L37.8136 24.4872C38.1847 24.7989 38.6531 24.9721 39.1429 24.9721C39.7894 24.9721 40.393 24.6769 40.7691 24.1738C41.3975 23.3541 41.2721 22.1814 40.4772 21.497L40.474 21.4953Z" fill="#B82132"/>
                    </svg>
                </button>
                {% if records %}
                    {% for record in records %}
                        <div class="daily__date_container">
                            <div class="daily__date">{{ date }}</div>
                            <button type="submit" src="#" class="daily__back_to_cale">
                                <svg xmlns="http://www.w3.org/2000/svg" width="56" height="68" viewBox="0 0 56 68" fill="none">
                                    <path d="M42.6626 16.6475H40.8398L40.319 18.5571C39.885 20.2931 38.1924 21.5951 36.4564 21.5951C35.5016 21.5951 34.5902 21.2045 34.0694 20.4667C33.5052 19.7289 33.3316 18.7307 33.592 17.7759L33.8958 16.6475H28.0368L27.516 18.5571C27.0386 20.2931 25.3894 21.5951 23.61 21.5951C22.6552 21.5951 21.7872 21.2045 21.223 20.4667C20.6588 19.7289 20.4852 18.7307 20.7456 17.7759L21.0494 16.6475H19.1398C16.232 16.6475 13.3242 18.9043 12.5864 21.8121L7.20478 41.6459C6.77078 43.2083 7.03118 44.7707 7.94258 45.8991C8.81058 47.0275 10.156 47.6785 11.675 47.6785H14.3224V48.8503C14.3224 51.9317 16.8396 54.4489 19.921 54.4489H42.6626C45.744 54.4489 48.2612 51.9317 48.2612 48.8503V22.2461C48.2612 19.1647 45.744 16.6475 42.6626 16.6475ZM11.7184 44.2933C11.3712 44.2933 10.9372 44.2065 10.6768 43.8593C10.4164 43.5555 10.373 43.0781 10.5466 42.5573L14.9734 25.9785H41.9682L37.7584 41.6893C37.3678 43.1215 35.8488 44.3367 34.46 44.3367H11.7184V44.2933ZM44.876 48.8503C44.876 50.0655 43.8778 51.0637 42.6626 51.0637H19.9644C18.7492 51.0637 17.751 50.0655 17.751 48.8503V47.6785H34.46C37.3678 47.6785 40.2756 45.4217 41.0134 42.5139L44.876 28.1485V48.8503Z" fill="#B82132"/>
                                    <path d="M23.6101 20.0326C24.6517 20.0326 25.6933 19.208 25.9537 18.1664L26.5613 15.8662C26.8217 14.8246 26.2141 14 25.2159 14C24.1743 14 23.1327 14.8246 22.8723 15.8662L22.2647 18.1664C22.0043 19.1646 22.6119 20.0326 23.6101 20.0326Z" fill="#B82132"/>
                                    <path d="M36.4565 20.0326C37.4981 20.0326 38.5397 19.208 38.8001 18.1664L39.4077 15.8662C39.6681 14.8246 39.0605 14 38.0623 14C37.0207 14 35.9791 14.8246 35.7187 15.8662L35.0677 18.1664C34.8073 19.1646 35.4149 20.0326 36.4565 20.0326Z" fill="#B82132"/>
                                    <path d="M27.7329 36.1774H23.6967C23.4363 36.1774 23.1325 36.3944 23.0457 36.6548L22.2645 39.606C22.1777 39.8664 22.3513 40.0834 22.6117 40.0834H26.6479C26.9083 40.0834 27.2121 39.8664 27.2989 39.606L28.0801 36.6548C28.1669 36.3944 27.9933 36.1774 27.7329 36.1774Z" fill="#B82132"/>
                                    <path d="M20.6155 36.1774H16.5793C16.3189 36.1774 16.0151 36.3944 15.9283 36.6548L15.1471 39.606C15.0603 39.8664 15.2339 40.0834 15.4943 40.0834H19.5305C19.7909 40.0834 20.0947 39.8664 20.1815 39.606L20.9627 36.6548C21.0495 36.3944 20.9193 36.1774 20.6155 36.1774Z" fill="#B82132"/>
                                    <path d="M34.8506 36.1774H30.8144C30.554 36.1774 30.2502 36.3944 30.1634 36.6548L29.3822 39.606C29.2954 39.8664 29.469 40.0834 29.7294 40.0834H33.7656C34.026 40.0834 34.3298 39.8664 34.4166 39.606L35.1978 36.6548C35.2846 36.3944 35.111 36.1774 34.8506 36.1774Z" fill="#B82132"/>
                                    <path d="M29.3823 29.9712H25.3461C25.0857 29.9712 24.7819 30.1882 24.6951 30.4486L23.9139 33.3998C23.8271 33.6602 24.0007 33.8772 24.2611 33.8772H28.2973C28.5577 33.8772 28.8615 33.6602 28.9483 33.3998L29.7295 30.4486C29.8163 30.1882 29.6861 29.9712 29.3823 29.9712Z" fill="#B82132"/>
                                    <path d="M22.3081 29.9712H18.2719C18.0115 29.9712 17.7077 30.1882 17.6209 30.4486L16.8397 33.3998C16.7529 33.6602 16.9265 33.8772 17.1869 33.8772H21.2231C21.4835 33.8772 21.7873 33.6602 21.8741 33.3998L22.6553 30.4486C22.7421 30.1882 22.5685 29.9712 22.3081 29.9712Z" fill="#B82132"/>
                                    <path d="M31.4219 33.9206H35.4581C35.7185 33.9206 36.0223 33.7036 36.1091 33.4432L36.8903 30.492C36.9771 30.2316 36.8035 30.0146 36.5431 30.0146H32.5069C32.2465 30.0146 31.9427 30.2316 31.8559 30.492L31.0747 33.4432C30.9879 33.6602 31.1181 33.9206 31.4219 33.9206Z" fill="#B82132"/>
                                </svg>
                            </button>
                        </div>
                        <div class="daily__time_container">
                            <div class="daily__time_logo">
                                <svg xmlns="http://www.w3.org/2000/svg" width="35" height="42" viewBox="0 0 35 42" fill="none">
                                    <path fill-rule="evenodd" clip-rule="evenodd" d="M15.6526 7.9722V10.009C15.0425 10.0868 14.4495 10.2132 13.8734 10.3833L13.3411 9.52654C13.1759 9.26161 12.9109 9.07204 12.6071 9.00033C12.3021 8.92984 11.9812 8.9821 11.7151 9.14738L9.49963 10.5255C9.2347 10.6908 9.04512 10.9557 8.97341 11.2595C8.90293 11.5646 8.95518 11.8854 9.12046 12.1516L9.52637 12.8054C7.18087 14.8944 5.70312 17.9375 5.70312 21.3233C5.70312 27.6196 10.8147 32.7299 17.1097 32.7299C23.4047 32.7299 28.5163 27.6183 28.5163 21.3233C28.5163 17.9375 27.0373 14.8933 24.6893 12.8029L25.0952 12.1515C25.2605 11.8866 25.3127 11.5657 25.2423 11.2595C25.1718 10.9557 24.9822 10.6907 24.716 10.5254L22.5006 9.14732C22.2357 8.98204 21.9148 8.92978 21.6086 9.00027C21.3048 9.07075 21.0398 9.26034 20.8745 9.52648L20.3423 10.382C19.7686 10.2119 19.1756 10.0867 18.568 10.009V7.97214H18.969C19.6192 7.97214 20.1478 7.44471 20.1478 6.79331V5.74695C20.1478 5.09679 19.6204 4.56812 18.969 4.56812H15.2491C14.5989 4.56812 14.0702 5.09554 14.0702 5.74695V6.79331C14.0702 7.44347 14.5977 7.97214 15.2491 7.97214L15.6526 7.9722ZM10.4633 13.2829C8.1518 15.1969 6.67766 18.088 6.67766 21.322C6.67766 27.0813 11.3527 31.7563 17.112 31.7563C22.8701 31.7563 27.5464 27.0813 27.5464 21.322C27.5464 15.5639 22.8713 10.8876 17.112 10.8876C14.5939 10.8876 12.2836 11.7809 10.4804 13.2683C10.4743 13.2732 10.4682 13.2768 10.4634 13.2817L10.4633 13.2829ZM17.1108 11.5997C11.7454 11.5997 7.38855 15.9565 7.38855 21.3219C7.38855 26.6886 11.7454 31.0441 17.1108 31.0441C22.4762 31.0441 26.833 26.6886 26.833 21.3219C26.833 15.9565 22.4762 11.5997 17.1108 11.5997ZM17.1108 12.5719C21.9402 12.5719 25.8608 16.4925 25.8608 21.3219C25.8608 26.1513 21.9402 30.0719 17.1108 30.0719C12.2814 30.0719 8.36077 26.1513 8.36077 21.3219C8.36077 16.4925 12.2814 12.5719 17.1108 12.5719ZM16.6247 27.3814V29.3259C16.6247 29.5944 16.8422 29.812 17.1108 29.812C17.3793 29.812 17.5969 29.5944 17.5969 29.3259V27.3814C17.5969 27.1129 17.3793 26.8953 17.1108 26.8953C16.8422 26.8953 16.6247 27.1129 16.6247 27.3814ZM23.1141 26.6377L21.7396 25.2632C21.5488 25.0736 21.2414 25.0736 21.0518 25.2632C20.8622 25.4528 20.8622 25.7615 21.0518 25.951L22.4275 27.3255C22.6171 27.5151 22.9258 27.5151 23.1153 27.3255C23.3049 27.1359 23.3049 26.8272 23.1153 26.6377H23.1141ZM12.4816 25.2632L11.1071 26.6377C10.9175 26.8273 10.9175 27.136 11.1071 27.3255C11.2967 27.5151 11.6054 27.5151 11.7949 27.3255L13.1706 25.951C13.3602 25.7614 13.3602 25.4528 13.1706 25.2632C12.9798 25.0736 12.6724 25.0736 12.4828 25.2632H12.4816ZM16.6244 19.9475C16.058 20.1481 15.6521 20.6889 15.6521 21.322C15.6521 22.1265 16.306 22.7804 17.1105 22.7804C17.915 22.7804 18.5688 22.1265 18.5688 21.322C18.5688 20.6877 18.1629 20.1481 17.5966 19.9475V17.0382C17.5966 16.7696 17.379 16.5521 17.1105 16.5521C16.8419 16.5521 16.6244 16.7696 16.6244 17.0382V19.9475ZM17.1105 20.8359C17.379 20.8359 17.5966 21.0535 17.5966 21.322C17.5966 21.5906 17.379 21.8081 17.1105 21.8081C16.8419 21.8081 16.6244 21.5906 16.6244 21.322C16.6244 21.0535 16.8419 20.8359 17.1105 20.8359ZM25.1144 20.8359H23.17C22.9014 20.8359 22.6839 21.0535 22.6839 21.322C22.6839 21.5906 22.9014 21.8081 23.17 21.8081H25.1144C25.383 21.8081 25.6005 21.5906 25.6005 21.322C25.6005 21.0535 25.383 20.8359 25.1144 20.8359ZM11.0525 20.8359H9.10806C8.83949 20.8359 8.62195 21.0535 8.62195 21.322C8.62195 21.5906 8.83949 21.8081 9.10806 21.8081H11.0525C11.3211 21.8081 11.5386 21.5906 11.5386 21.322C11.5386 21.0535 11.3211 20.8359 11.0525 20.8359ZM13.1707 16.6944L11.795 15.3199C11.6055 15.1303 11.2968 15.1303 11.1072 15.3199C10.9176 15.5095 10.9176 15.8182 11.1072 16.0078L12.4817 17.3823C12.6725 17.5718 12.98 17.5718 13.1695 17.3823C13.3591 17.1927 13.3591 16.884 13.1695 16.6944H13.1707ZM22.4275 15.3199L21.0518 16.6944C20.8622 16.884 20.8622 17.1927 21.0518 17.3823C21.2426 17.5718 21.5501 17.5718 21.7397 17.3823L23.1142 16.0078C23.3037 15.8182 23.3037 15.5095 23.1142 15.3199C22.9246 15.1303 22.6159 15.1303 22.4263 15.3199H22.4275ZM16.6259 13.3196V15.264C16.6259 15.5326 16.8435 15.7501 17.112 15.7501C17.3806 15.7501 17.5982 15.5326 17.5982 15.264V13.3196C17.5982 13.051 17.3806 12.8335 17.112 12.8335C16.8435 12.8335 16.6259 13.051 16.6259 13.3196ZM12.9327 10.708L12.5171 10.0396C12.488 9.99338 12.4418 9.95936 12.3883 9.9472C12.3336 9.93505 12.2777 9.94477 12.2303 9.97394L10.0149 11.3509C9.96868 11.38 9.93466 11.4262 9.9225 11.4797C9.91035 11.5344 9.91886 11.5903 9.94802 11.6377L10.2883 12.1845C11.094 11.5817 11.9824 11.0835 12.9327 10.708ZM23.9321 12.1821L24.2711 11.6376C24.3003 11.5915 24.3088 11.5343 24.2966 11.4797C24.2845 11.4262 24.2505 11.38 24.2043 11.3508C24.2043 11.3508 21.9888 9.97393 21.9888 9.97271C21.9426 9.94476 21.8855 9.93504 21.8321 9.94719C21.7774 9.95935 21.7312 9.99338 21.702 10.0396L21.2876 10.7055C22.238 11.081 23.1276 11.5793 23.9321 12.1809L23.9321 12.1821ZM17.5982 7.97245V9.91689H16.6259V7.97245H17.5982ZM15.2527 7.00023H18.9726C19.0869 7.00023 19.1792 6.90786 19.1792 6.79363V5.74727C19.1792 5.63303 19.0869 5.54067 18.9726 5.54067H15.2527C15.1384 5.54067 15.0461 5.63304 15.0461 5.74727V6.79363C15.0461 6.90787 15.1384 7.00023 15.2527 7.00023Z" fill="#B82132"/>
                                </svg>
                            </div>
                            <div class="daily__time_info">
                                <div class="daily__both_time">
                                    <div class="daily__start_time">시작: <span class="daily__red">{{ record.start_time|date:"H:i" }}</span></div>
                                    <div class="daily__stop_time">종료: <span class="daily__red">{{ record.end_time|date:"H:i" }}</span></div>
                                </div>
                                <div class="daily__total_time">총 시간: <span class="daily__red">{{ record.time }}</span></div>
                            </div>
                        </div>
                        <div class="daily__route_container">
                            <div class="daily__route_info_container">
                                <div class="daily__route_info">얼마걸음: <span class="daily__red">{{ record.distance }}km</span></div>
                                <div class="daily__route_info">평균 페이스: <span class="daily__red">{{ record.pace }}분/km</span></div>
                                <div class="daily__route_info">총 소비칼로리: <span class="daily__red">{{ record.calories }}kcal</span></div>
                            </div>
                            <button type="submit" class="daily__route_map" data-record-id="{{record.id}}">
                                <svg xmlns="http://www.w3.org/2000/svg" width="55" height="69" viewBox="0 0 55 69" fill="none">
                                    <path d="M44.2628 24.4819H36.1377V31.0165H44.2628V24.4819Z" fill="#76453B"/>
                                    <path d="M44.2634 17.6052H38.1402C38.0748 18.6997 37.2223 19.5726 36.1377 19.6765V24.1398H44.2628L44.2634 17.6052Z" fill="#76453B"/>
                                    <path d="M38.1314 17.2627H44.2628V10.8425H36.1377V15.2667C37.1981 15.3685 38.0302 16.2034 38.1314 17.2627Z" fill="#76453B"/>
                                    <path d="M44.2634 40.2356C43.4081 40.1657 42.6909 39.6229 42.3824 38.8606H36.1377V44.6581H44.2628L44.2634 40.2356Z" fill="#76453B"/>
                                    <path d="M52.6168 38.2363H46.6498C46.5464 39.3127 45.6873 40.158 44.6055 40.2378V44.6581H52.6157L52.6168 38.2363Z" fill="#76453B"/>
                                    <path d="M35.7958 24.4819H28.6112V24.741H27.6707V31.0165H35.7958V24.4819Z" fill="#76453B"/>
                                    <path d="M35.7958 15.2585V10.8425H27.6707V16.639H33.8637C34.1799 15.8613 34.9186 15.3107 35.7958 15.2585Z" fill="#76453B"/>
                                    <path d="M18.8604 31.3597H11.4849V37.1941H18.8604V31.3597Z" fill="#76453B"/>
                                    <path d="M18.8604 24.7408H11.4849V31.0169H18.8604V24.7408Z" fill="#76453B"/>
                                    <path d="M33.8635 18.306H28.6094V24.1399H35.7946V19.6849C34.9184 19.6332 34.1798 19.0821 33.8635 18.306Z" fill="#76453B"/>
                                    <path d="M35.7958 31.3597H27.6707V37.1941H35.7958V31.3597Z" fill="#76453B"/>
                                    <path d="M46.6581 37.8937H52.6168V31.3597H44.6072V35.8169C45.7138 35.8978 46.591 36.7833 46.6581 37.8937Z" fill="#76453B"/>
                                    <path d="M52.6168 24.4819H44.6072V31.0165H52.6168V24.4819Z" fill="#76453B"/>
                                    <path d="M52.6168 17.6052H44.6072V24.1398H52.6168V17.6052Z" fill="#76453B"/>
                                    <path d="M52.6168 10.8425H44.6072V17.2621H52.6168V10.8425Z" fill="#76453B"/>
                                    <path d="M44.2634 35.8191V31.3597H36.1377V37.1941H42.3824C42.6909 36.4318 43.4087 35.889 44.2634 35.8191Z" fill="#76453B"/>
                                    <path d="M9.81863 23.0744H10.3928V17.6052H2.38208V24.1398H9.81863V23.0744Z" fill="#76453B"/>
                                    <path d="M10.3928 10.8425H2.38208V17.2621H10.3928V10.8425Z" fill="#76453B"/>
                                    <path d="M9.81863 24.4819H2.38208V31.0165H9.81863V24.4819Z" fill="#76453B"/>
                                    <path d="M10.3928 38.8606H9.81863V38.2363H2.38208V44.6581H10.3928V38.8606Z" fill="#76453B"/>
                                    <path d="M0 8.58289V46.9162H55V8.58289H0ZM53.1878 45.2288H1.8106V10.2708H53.1878V45.2288Z" fill="#76453B"/>
                                    <path d="M18.8605 38.8606H10.7354V44.6581H18.8605V38.8606Z" fill="#76453B"/>
                                    <path d="M35.7958 38.8606H27.6707V44.6581H35.7958V38.8606Z" fill="#76453B"/>
                                    <path d="M9.81863 31.3597H2.38208V37.8954H9.81863V31.3597Z" fill="#76453B"/>
                                    <path d="M18.8605 17.6052H10.7354V23.0744H18.8605V17.6052Z" fill="#76453B"/>
                                    <path d="M26.9435 16.639H27.328V10.8425H19.2034V17.2627H26.9435V16.639Z" fill="#76453B"/>
                                    <path d="M27.328 24.7408H19.2034V31.0169H27.328V24.7408Z" fill="#76453B"/>
                                    <path d="M26.9441 17.6052H19.2034V23.0744H26.9441V17.6052Z" fill="#76453B"/>
                                    <path d="M18.8605 10.8425H10.7354V17.2621H18.8605V10.8425Z" fill="#76453B"/>
                                    <path d="M27.328 38.8606H19.2034V44.6581H27.328V38.8606Z" fill="#76453B"/>
                                    <path d="M27.328 31.3597H19.2034V37.1941H27.328V31.3597Z" fill="#76453B"/>
                                </svg>
                            </button>
                        </div>
                    </div>
                    <div class="daily__user_register">
                        {% if record.image %}
                            <div class="daily__user_image">
                                <img src="{{ record.image.url }}" alt="오늘걸음 사진">
                            </div>
                        {% endif %}
                        {% if record.memo %}
                            <div class="daily__user_comment">{{ record.memo }}</div>
                        {% endif %}
                        <form class="walkForm" method="POST" enctype="multipart/form-data">
                            {% csrf_token %}
                            <input type="hidden" name="record_id" value="{{ record.id }}">
                            <label for="image">
                                사진 등록 및 변경하기
                                {% if record.image %}
                                    <p>현재 등록된 사진: {{ record.image.name }}</p>
                                {% endif %}
                            </label>
                            <input type="file" name="image">
                            <label for="memo">코멘트 등록 및 변경하기</label>
                            <textarea name="memo">{{ record.memo }}</textarea>
                            <button type="submit">변경사항 저장</button>
                        </form>               
                    </div>
                    {% endfor %}
                {% else %}
                </div>
                <div class="daily__empty_alert">운동기록이 없습니다. 🥲</div>
            {% endif %}
        </div>
    </div>
    <div id="mapModal" class="modal">
        <div class="modal-content">
            <span class="close">&times;</span>
            <h2>경로보기</h2>
            <div id="map"></div>
        </div>
    </div>
    <script>
        let djangoPathData = JSON.parse('{{ path_data|safe }}'); // 뷰에서 보내준 모델의 path 데이터
        console.log("모델의 path 데이터: ", djangoPathData); // 확인용(삭제 예정)
    </script>
    <script src="{% static 'js/daily_record.js' %}"></script>
</body>
</html>